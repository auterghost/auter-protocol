<!DOCTYPE html>
<html lang="en" translate="yes">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Auter Ark - A futuristic Web3 reverse lottery game on Polygon. Connect wallet, select numbers, and win.">
    <meta name="google" content="notranslate" value="no">
    
    <title>AUTER ARK | Web3 Lottery</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Rajdhani', sans-serif; background-color: #050b14; color: #e2e8f0; }
        .brand-font { font-family: 'Orbitron', sans-serif; }
        .glass-panel { background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(12px); border: 1px solid rgba(148, 163, 184, 0.1); }
        .selected-ball { background-color: #06b6d4; color: black; box-shadow: 0 0 15px rgba(6,182,212,0.6); transform: scale(1.1); }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
    </style>

    <script type="importmap">
    {
      "imports": {
        "ethers": "https://esm.sh/ethers@6.11.1"
      }
    }
    </script>
</head>
<body class="min-h-screen pb-20 selection:bg-cyan-500 selection:text-black">

    <div class="fixed inset-0 pointer-events-none overflow-hidden -z-10">
        <div class="absolute top-0 left-1/4 w-96 h-96 bg-purple-900/20 rounded-full blur-[100px]"></div>
        <div class="absolute bottom-0 right-1/4 w-96 h-96 bg-cyan-900/20 rounded-full blur-[100px]"></div>
        <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5"></div>
    </div>

    <div class="container mx-auto px-4 py-6">
        <header class="flex flex-col md:flex-row justify-between items-center mb-10 gap-4">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 bg-gradient-to-tr from-cyan-400 to-purple-600 rounded-lg flex items-center justify-center shadow-lg">
                    <span class="text-2xl font-black text-white brand-font">A</span>
                </div>
                <div>
                    <h1 class="text-3xl font-bold brand-font text-white">AUTER ARK</h1>
                    <div class="flex items-center gap-2">
                        <p class="text-cyan-500 text-xs tracking-[0.2em] font-bold">V16.3 DIAGNOSTIC</p>
                    </div>
                </div>
            </div>
            
            <button id="connect-btn" class="bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-3 px-6 rounded-lg transition-all shadow-[0_0_20px_rgba(8,145,178,0.4)] brand-font">
                CONNECT WALLET
            </button>
            <div id="wallet-info" class="hidden flex items-center gap-4 glass-panel px-4 py-2 rounded-lg">
                <span id="balance-display" class="text-xl font-bold text-cyan-400 font-mono">0 POL</span>
                <div class="h-8 w-px bg-slate-700 mx-2"></div>
                <span id="address-display" class="text-sm font-mono text-slate-200">...</span>
            </div>
        </header>

        <div id="game-ui" class="hidden grid grid-cols-1 lg:grid-cols-12 gap-8">
            <div class="lg:col-span-8 space-y-6">
                <div class="glass-panel p-6 rounded-2xl relative h-full flex flex-col justify-between">
                    <div>
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-bold text-slate-200 brand-font">SELECT 6 NUMBERS</h3>
                            <span id="selection-count" class="text-xl font-bold font-mono text-slate-200">0/6</span>
                        </div>
                        <div id="grid-container" class="grid grid-cols-7 sm:grid-cols-10 gap-2 sm:gap-3 p-4 bg-slate-900/50 rounded-xl"></div>
                    </div>
                    <div class="mt-8 flex flex-col sm:flex-row justify-between items-center gap-4">
                        <div class="text-slate-400 text-sm w-full sm:w-auto text-center sm:text-left">
                            Cost per Ticket: <span class="text-cyan-400 font-bold block sm:inline text-lg sm:text-base">1.0 POL</span>
                        </div>
                        <div class="flex gap-4 w-full sm:w-auto justify-end">
                            <button id="clear-btn" class="flex-1 sm:flex-none px-4 py-3 rounded-lg border border-slate-600 text-slate-400 hover:bg-slate-800 font-bold">CLEAR</button>
                            <button id="buy-btn" class="flex-1 sm:flex-none bg-gradient-to-r from-cyan-600 to-blue-600 text-white px-8 py-3 rounded-lg font-bold brand-font shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 transition-all" disabled>
                                MINT TICKET
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-4 space-y-6">
                <div class="bg-gradient-to-b from-slate-800 to-slate-900 p-6 rounded-2xl border border-slate-700 shadow-2xl relative overflow-hidden">
                    <h3 class="text-slate-400 text-sm font-bold tracking-widest mb-2">GLOBAL PRIZE POOL</h3>
                    <div class="text-4xl font-black text-white brand-font mb-6"><span id="pool-size">0</span> <span class="text-cyan-500 text-lg">POL</span></div>
                    
                    <div class="grid grid-cols-2 gap-4 mb-6">
                         <div class="bg-slate-800/50 p-3 rounded border border-slate-700">
                            <p class="text-xs text-slate-500 mb-1">Players</p>
                            <p id="player-count" class="font-bold text-xl">0</p>
                         </div>
                         <div class="bg-slate-800/50 p-3 rounded border border-slate-700">
                            <p class="text-xs text-slate-500 mb-1">My Winnings</p>
                            <p id="my-winnings" class="font-bold text-xl text-green-400">0</p>
                            <button id="claim-btn" class="hidden w-full text-xs bg-green-600 hover:bg-green-500 px-2 py-1.5 rounded text-white mt-2 font-bold tracking-wider transition-colors">CLAIM PRIZE</button>
                         </div>
                    </div>

                    <button id="draw-btn" class="w-full bg-slate-800 hover:bg-slate-700 text-slate-300 py-4 rounded-xl font-bold tracking-widest border border-slate-600 hover:border-cyan-500 transition-all text-sm mb-2">
                        EXECUTE DRAW (VRF)
                    </button>
                    
                    <button id="check-btn" class="w-full bg-red-900/50 hover:bg-red-900/80 text-red-200 py-3 rounded-xl text-xs font-mono border border-red-800 tracking-wider">
                        üõ†Ô∏è OPEN DIAGNOSTIC PANEL
                    </button>
                </div>
                
                <div class="glass-panel rounded-2xl p-6">
                    <h3 class="text-lg font-bold text-slate-300 brand-font mb-4">PROTOCOL RULES</h3>
                    <ul class="text-sm text-slate-400 space-y-3 list-none">
                        <li class="flex items-start gap-2">
                            <span class="text-cyan-500 font-bold">01.</span>
                            <span>Mint a ticket (1 POL).</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <span class="text-cyan-500 font-bold">02.</span>
                            <span>Wait for draw.</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div id="loading-overlay" class="hidden fixed inset-0 z-50 bg-black/90 backdrop-blur-md flex items-center justify-center">
             <div class="text-center">
                 <div class="w-16 h-16 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mx-auto mb-6 shadow-[0_0_30px_rgba(6,182,212,0.3)]"></div>
                 <p id="loading-text" class="text-cyan-400 font-bold brand-font text-xl tracking-widest animate-pulse">PROCESSING</p>
             </div>
        </div>

        <div id="debug-modal" class="hidden fixed inset-0 z-50 bg-black/95 backdrop-blur-xl flex items-center justify-center p-4">
            <div class="bg-slate-900 border border-slate-700 rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto p-6 shadow-2xl relative">
                <button id="close-debug" class="absolute top-4 right-4 text-slate-500 hover:text-white">‚úï</button>
                
                <h2 class="text-2xl font-bold brand-font text-white mb-6 flex items-center gap-2">
                    <span class="text-yellow-500">‚ö†</span> SYSTEM DIAGNOSTIC
                </h2>

                <div id="debug-content" class="space-y-4 font-mono text-sm text-slate-300">
                    <p class="text-center animate-pulse">Scanning Blockchain...</p>
                </div>

                <div class="mt-8 pt-6 border-t border-slate-800">
                    <h3 class="text-white font-bold mb-2">DEBUG CHECKLIST (MUST DO):</h3>
                    <ol class="list-decimal pl-5 space-y-2 text-slate-400">
                        <li>Is <strong>Subscription ID</strong> detected above same as your Chainlink ID?</li>
                        <li>Is <strong>Contract Balance</strong> > 0 (Did you buy a ticket)?</li>
                        <li>Click the <span class="text-cyan-400">CHAINLINK PANEL</span> link below. Does "Consumers" list the Contract Address shown above?</li>
                    </ol>
                </div>
                
                <div class="grid grid-cols-2 gap-4 mt-6">
                    <a id="link-chainlink" href="#" target="_blank" class="block text-center bg-blue-900/50 hover:bg-blue-800 text-blue-200 py-3 rounded border border-blue-800">
                        OPEN CHAINLINK PANEL ‚Üó
                    </a>
                    <a id="link-polygonscan" href="#" target="_blank" class="block text-center bg-purple-900/50 hover:bg-purple-800 text-purple-200 py-3 rounded border border-purple-800">
                        OPEN POLYGONSCAN ‚Üó
                    </a>
                </div>
            </div>
        </div>

        <div id="winner-modal" class="hidden fixed inset-0 z-[60] bg-black/90 backdrop-blur-xl flex items-center justify-center p-4 transition-opacity duration-500">
            <div class="bg-gradient-to-b from-yellow-900/40 to-slate-900 border border-yellow-600/50 rounded-2xl w-full max-w-md p-8 text-center shadow-[0_0_50px_rgba(234,179,8,0.3)] relative overflow-hidden transform scale-100 transition-transform duration-300">
                <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-20 animate-pulse"></div>
                
                <div class="relative z-10">
                    <div class="text-6xl mb-4 animate-bounce">üèÜ</div>
                    <h2 class="text-3xl font-black brand-font text-white mb-2 tracking-widest text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-600">JACKPOT!</h2>
                    <p class="text-slate-400 text-sm mb-6">WINNING NUMBER GENERATED ON CHAIN</p>
                    
                    <div class="bg-black/40 p-4 rounded-xl border border-yellow-900/50 mb-6">
                        <p class="text-xs text-yellow-500 uppercase tracking-widest mb-1">Winner Address</p>
                        <p id="winner-address" class="text-white font-mono text-lg break-all">0x00...0000</p>
                    </div>

                    <div class="bg-gradient-to-r from-yellow-900/20 to-amber-900/20 p-4 rounded-xl border border-yellow-600/30 mb-8">
                        <p class="text-xs text-yellow-500 uppercase tracking-widest mb-1">Prize Won</p>
                        <p id="winner-prize" class="text-3xl font-bold text-white font-mono">0.0 POL</p>
                    </div>

                    <button id="close-winner" class="w-full bg-gradient-to-r from-yellow-600 to-amber-600 hover:from-yellow-500 hover:to-amber-500 text-black font-bold py-4 rounded-xl shadow-lg transition-all transform hover:scale-105 brand-font">
                        CONTINUE
                    </button>
                </div>
            </div>
        </div>

    </div>

    <script type="module" src="script.js"></script>
</body>
</html>
